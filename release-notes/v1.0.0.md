# Release Notes - React SSR Plugin v1.0.0

**Release Date:** November 3, 2025

**Compatibility:** Frame-Master ^2.0.1

## Overview

The React SSR Plugin v1.0.0 is a production-ready plugin that brings powerful server-side rendering capabilities to Frame-Master applications. This plugin enables full-stack React development with automatic routing, layouts, streaming SSR, and hot module replacement for an optimal developer experience.

## ‚ú® Features

### Server-Side Rendering (SSR)

- **Streaming SSR**: Leverages React 19's `renderToReadableStream` for optimal performance
- **Automatic Hydration**: Seamless client-side takeover with React hydration
- **SEO Optimization**: Full server-side rendering ensures excellent SEO and initial page load performance

### File-Based Routing

- **Convention-Based Routes**: Automatic route generation from file structure in `src/pages/`
- **Dynamic Routes**: Support for dynamic segments using `[param]` syntax
- **Catch-All Routes**: Wildcard routes with `[...param]` for flexible matching
- **Nested Layouts**: Hierarchical layout system with `layout.tsx` files
- **Client & Server Routers**: Dual routing system optimized for both environments

### Layout System

- **Nested Layouts**: Automatic layout composition based on directory structure
- **Layout Inheritance**: Child routes inherit parent layouts
- **Server & Client Rendering**: Layouts work seamlessly in both SSR and CSR
- **Optional Layouts**: Enable/disable with `enableLayout` configuration option

### Developer Experience

- **Hot Module Replacement (HMR)**: Real-time updates without full page reload
- **WebSocket-Based HMR**: Fast and reliable change detection
- **Development Mode**: Optimized rebuild strategy for rapid development
- **Route-Specific Builds**: Only rebuild affected routes in dev mode
- **Error Boundaries**: Built-in error handling components
- **Loading States**: Customizable loading fallbacks

### Build System

- **Optimized Builder**: Custom build pipeline integrated with Frame-Master's builder
- **Code Splitting**: Automatic code splitting for optimal bundle sizes
- **Production Optimization**: Minification and tree-shaking in production mode
- **Static Asset Handling**: Efficient serving of built JavaScript modules
- **Plugin Architecture**: Extensible build configuration system

### Hooks & Context

- **`useRequest()`**: Access Frame-Master request context in components
- **`useParams()`**: Access route parameters
- **`useRoutes()`**: Get all available routes
- **Context Providers**: Built-in providers for sharing state across components
- **Type-Safe**: Full TypeScript support with type inference

## üéØ Key Components

### Core Files

- **`index.ts`**: Main plugin entry point with configuration and lifecycle hooks
- **`src/router/server/index.ts`**: Server-side routing engine
- **`src/router/client/index.tsx`**: Client-side routing with React Router
- **`src/build/index.ts`**: Custom build system for React components
- **`init/hydrate.ts`**: Client-side hydration initialization

### Default Templates

- **`init/shell.default.tsx`**: Default HTML shell wrapper
- **`init/client-wrapper.tsx`**: Client-side root wrapper with providers
- **`init/presentation.tsx`**: Example presentation component

### Utilities

- **`src/utils.ts`**: Helper functions for routing and component management
- **`src/hooks/index.ts`**: Custom React hooks for Frame-Master integration
- **`src/fallbacks/`**: Error boundary and loading components

## üì¶ Installation

```bash
bun add frame-master-plugin-react-ssr
```

## üöÄ Quick Start

### 1. Configure Frame-Master

```typescript
// frame-master.config.ts
import reactSSR from "frame-master-plugin-react-ssr";

export default {
  HTTPServer: {
    port: 3000,
  },
  plugins: [
    reactSSR({
      pathToPagesDir: "src/pages",
      pathToBuildDir: ".frame-master/build",
      enableLayout: true,
      debug: false,
    }),
  ],
} satisfies FrameMasterConfig;
```

### 2. Create Your First Page

```tsx
// src/pages/index.tsx
export default function HomePage() {
  return (
    <div>
      <h1>Welcome to Frame-Master with React SSR!</h1>
      <p>Server-side rendered by default, hydrated on the client.</p>
    </div>
  );
}
```

### 3. Add a Layout

```tsx
// src/pages/layout.tsx
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <>
      <nav>
        <a href="/">Home</a>
        <a href="/about">About</a>
      </nav>
      <main>{children}</main>
    </>
  );
}
```

### 4. Dynamic Routes

```tsx
// src/pages/blog/[slug].tsx
import { useParams } from "frame-master-plugin-react-ssr/hooks";

export default function BlogPost() {
  const params = useParams();

  return (
    <article>
      <h1>Blog Post: {params.slug}</h1>
    </article>
  );
}
```

## ‚öôÔ∏è Configuration Options

```typescript
type ReactSSRPluginOptions = {
  /** Path to the pages directory (default: "src/pages") */
  pathToPagesDir?: string;

  /** Path to the build output directory (default: ".frame-master/build") */
  pathToBuildDir?: string;

  /** Path to custom shell file (default: plugin's shell.default.tsx) */
  pathToShellFile?: string;

  /** Path to custom ClientWrapper (default: plugin's client-wrapper.tsx) */
  pathToClientWrapper?: string;

  /** Enable debug logs (default: false) */
  debug?: boolean;

  /** Additional build plugins configuration */
  buildConfig?: Build_Plugins[];

  /** Plugin execution priority (default: 10) */
  priority?: number;

  /** Enable layout feature (default: true) */
  enableLayout?: boolean;
};
```

## üîß Advanced Usage

### Custom Shell

Create a custom HTML shell for complete control over the document structure:

```tsx
// src/shell.tsx
export default function Shell({ children }: { children: JSX.Element }) {
  return (
    <html lang="en">
      <head>
        <meta charSet="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="/static/styles.css" />
      </head>
      <body>{children}</body>
    </html>
  );
}
```

### Custom Build Configuration

Extend the build process with custom plugins:

```typescript
reactSSR({
  buildConfig: [
    {
      name: "custom-plugin",
      setup(build) {
        // Custom build logic
      },
    },
  ],
});
```

### Using Frame-Master Context

Access request information in your components:

```tsx
import { useRequest } from "frame-master-plugin-react-ssr/hooks";

export default function MyComponent() {
  const masterRequest = useRequest();

  return (
    <div>
      <p>Current URL: {masterRequest.URL.pathname}</p>
      <p>Method: {masterRequest.request.method}</p>
    </div>
  );
}
```

## üèóÔ∏è Architecture

### Routing System

- **Server Router**: Bun's native file system router for SSR
- **Client Router**: React-based router for CSR navigation
- **Route Matcher**: Intelligent pattern matching for dynamic routes
- **Layout Resolution**: Automatic layout hierarchy computation

### Build Pipeline

1. **Discovery**: Scan pages directory for React components
2. **Compilation**: Transform TSX/JSX to optimized JavaScript
3. **Code Splitting**: Generate separate chunks per route
4. **Asset Generation**: Create hydration scripts and manifests
5. **HMR Integration**: Set up development hot reload

### Request Flow

1. **Request arrives** at Frame-Master server
2. **Server Router** matches the route
3. **Layouts loaded** from hierarchy
4. **Component rendered** to stream
5. **HTML streamed** to client
6. **Client hydrates** with React
7. **Navigation** handled by client router

## üêõ Known Issues

- Layout routes must be named `layout.tsx` or `layout.jsx`
- Dynamic route parameters are automatically split on `/` when containing multiple segments
- HMR requires WebSocket connection on `/hmr` endpoint

## üìä Performance

- **Initial Load**: Optimized with streaming SSR
- **Code Splitting**: Automatic per-route splitting
- **Bundle Size**: Minimal overhead (~50KB gzipped base)
- **HMR Speed**: <100ms reload time in development

## üîê Security

- **XSS Protection**: React's built-in escaping
- **CSP Compatible**: Works with Content Security Policy
- **Server-Only Code**: Automatic isolation of server code from client bundles

## üõ£Ô∏è Roadmap

Future enhancements planned:

- Static Site Generation (SSG) support
- Incremental Static Regeneration (ISR)
- API route handlers
- Middleware support
- Image optimization
- Metadata API

## üìö Documentation

For complete documentation, visit:

- [Frame-Master Documentation](https://frame-master.dev)
- [React SSR Plugin Guide](https://frame-master.dev/plugins/react-ssr)

## ü§ù Contributing

Contributions are welcome! Please read the contributing guidelines before submitting PRs.

## üìÑ License

MIT License - see LICENSE file for details

## üôè Acknowledgments

- Built on top of Frame-Master framework
- Powered by React 19 and Bun runtime
- Inspired by Next.js and Remix routing patterns

---

**Note**: This is the initial stable release. Please report any issues on GitHub.
